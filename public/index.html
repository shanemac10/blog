<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.6/angular.min.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.3/ui-bootstrap.min.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.3/ui-bootstrap-tpls.min.js"></script>

    <script type="text/javascript" src="js/app.js"></script>
    <script type="text/javascript" src="js/blogctrl.js"></script>
    <script type="text/javascript" src="js/popctrl.js"></script>
    <script type="text/javascript" src="js/commentctrl.js"></script>

    <title>OK Coders Blog</title>
    <link rel="icon" href="17.png"></link>

    <style>#blogIcon {height: 110px; width: 250px; margin: 0 30px;}</style>
  </head>

  <body ng-app="blogApp" ng-controller="BlogCtrl">

    <div class="page-header text-center">
      <h1><img id="blogIcon" src="18.png">OK Coders Blog  |<small> Powered by Node and Angular</small></h1>
    </div>

    <div class="container" style="margin-top: 30px">
      <div class="row">

        <div class="col-md-10 col-md-offset-1" ><!--Blog Posts-->
          <div class="panel panel-primary">

            <div class="panel-heading" style="height: 55px;">
              <h2 class="panel-title" style="font-size: 1.8em;">Blog Posts
                <button type="button" class="btn btn-success pull-right" ng-click="popPost()">ADD NEW POST &nbsp;&nbsp;&nbsp;
                  <span class="glyphicon glyphicon-plus"></span>
                </button>
              </h2>
            </div>

            <div class="panel-body" ng-repeat="post in blogPosts">


              <table class="table table-bordered">

                <tr>

                  <th class="info">
                    <img class="img-thumbnail pull-left" ng-src="{{post.user.image}}" style="width:40px; margin: 0px;">

                    <div class="pull-left" style="margin: 0; font-size: 1.4em;">&nbsp;&nbsp;{{post.user.name}}&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;</div>
                    <small>{{post.timestamp | date : 'medium'}}</small>&nbsp;&nbsp;&nbsp;
                    <span class="label label-default" ng-if="post.edited"><span class="glyphicon glyphicon-pencil"></span>{{post.edited}}</span>
                    <span style="font-size: 1.4em;" class="pull-right">{{post.title}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  </th>

                </tr>


                <tr>
                  <td><p style="white-space: pre-line">{{post.body}}</p>

                      <div ng-if="post.comments.length">  <!-- Comment sub-table -->
                        <table ng-repeat="comment in post.comments" class="table table-bordered">
                          <tr>
                            <th class="active">
                              <img class="img-thumbnail pull-left" ng-src="{{comment.user.image}}" style="width:30px; margin: 0px;">
                              <div class="pull-left" style="margin: 0; font-size: 1.2em;">&nbsp;&nbsp;{{comment.user.name}}</div>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
                              <small>{{comment.timestamp | date : 'medium'}}</small>
                            </th>
                          </tr>
                          <tr>
                            <td>

                              <p style="white-space: pre-line">{{comment.body}}</p>
                            </td>
                          </tr>
                        </table><!-- End ng-repeat comment -->
                      </div>  <!-- End ng-if comments -->

                    <div class="btn-group pull-right" role="group" style="font-size: 1.8em">
                      <!-- <button type="button" class="btn btn-danger"><span class="glyphicon glyphicon-heart-empty"></span></button>
                      <button type="button" class="btn"><span class="glyphicon glyphicon-thumbs-down"></span></button> -->
                      <button type="button" class="btn btn-default" ng-click="popPost(post)">EDIT POST &nbsp;&nbsp;&nbsp;<span class="glyphicon glyphicon-edit"></span></button>
                      <button type="button" class="btn btn-success" ng-click="popComment(post)">ADD COMMENT &nbsp;&nbsp;&nbsp;<span class="glyphicon glyphicon-plus"></span></button>
                    </div>

                  </td>
                </tr>

              <table>

            </div> <!--End ng-repeat posts-->

          </div>
        </div><!--End Blog Posts-->

      </div><!--End row-->
    </div><!--End container-->

  </body>
</html>
